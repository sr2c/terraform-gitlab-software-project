
<!-- markdownlint-disable -->
# terraform-gitlab-software-project
[![pipeline status](https://gitlab.com/sr2c/terraform-gitlab-software-project/badges/main/pipeline.svg?ignore_skipped=true)](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/pipelines)
[![latest release](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/badges/release.svg)](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/tags)
[![gitlab stars](https://img.shields.io/gitlab/stars/sr2c/terraform-gitlab-software-project)](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/starrers)
<!-- markdownlint-restore -->

[![README Header][readme_header_img]][readme_header_link]

[![SR2 Communications Limited][logo]](https://www.sr2.uk/)

<!--




  ** DO NOT EDIT THIS FILE
  **
  ** This file was automatically generated by the `build-harness`.
  ** 1) Make all changes to `README.yaml`
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file.
  **
  ** (We maintain HUNDREDS of open source projects. This is how we maintain our sanity.)
  **





-->

GitLab project for a software project with optional GitHub mirror.

---















## Usage


**IMPORTANT:** We do not pin modules to versions in our examples because of the
difficulty of keeping the versions in the documentation in sync with the latest released versions.
We highly recommend that in your code you pin the version to the exact version you are
using so that your infrastructure remains stable, and update versions in a
systematic way so that they do not catch you by surprise.

Also, because of a bug in the Terraform registry ([hashicorp/terraform#21417](https://github.com/hashicorp/terraform/issues/21417)),
the registry shows many of our inputs as required when in fact they are optional.
The table below correctly indicates which inputs are required.


```hcl
terraform {
  required_providers {
    gitlab = {
      source = "gitlabhq/gitlab"
    }
    github = {
      source = "integrations/github"
    }
  }
}

provider "gitlab" {
  token = local.gitlab_token
}
  
provider "github" {
  token = local.github_token
  owner = local.github_organization_name
}

locals {
  gitlab_token             = ""        # Generate this using the instructions below
  gitlab_group_id          = 11925634  # Change this to your organization's GitLab group ID
  github_organization_name = "sr2c"    # Change this to your organization's name
  github_token             = ""        # Generate this using the instructions below
}

module "projects" {
  source        = "sr2c/software-project/gitlab"
  gitlab_group  = local.gitlab_group_id
  name          = "terraform-null-example"
  description   = "An example Terraform module (null provider)"
  github_mirror = true
  github_user   = "ExampleMirrorBot"
  github_token  = local.github_token
}
```

### Generating the GitLab token

To configure GitLab, you will need an access token. GitLab has a variety of scoped access tokens, including
[personal](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html) and
[group](https://docs.gitlab.com/ee/user/group/settings/group_access_tokens.html) access tokens.
Project-level access tokens cannot be used with this module.
Create the type of token that is suitable according to your threat model.

Add a name so that you will be reminded of the purpose of this token when you go to look at it later.
Your access token will need the “api” scope. The expiry can be set according to your threat model.
GitLab will send an email warning to token owners 7 days before expiry allowing you to generate a new token and
update your configuration.

### Generating the GitHub token

To configure GitHub, you will need a “personal access token”. It is not possible to restrict a token to specific
repositories, so it is best to create a
[machine user](https://docs.github.com/en/developers/overview/managing-deploy-keys#machine-users) and then invite that
user to only the repositories that should be accessed to limit the impact of a token disclosure.

To create a token, visit the [New personal access token](https://github.com/settings/tokens/new) page of the GitHub
settings.
Add a note so that you will be reminded of the purpose of this token when you go to look at it later.
Your access token will need the “repo” OAuth scope.

The expiry can be set according to your threat model. GitHub will
[send an email warning](https://github.blog/changelog/2021-07-26-expiration-options-for-personal-access-tokens/)
before the token expires allowing you to generate a new token and update your configuration.






<!-- markdownlint-disable -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0.11 |
| <a name="requirement_github"></a> [github](#requirement\_github) | >= 5.15.0 |
| <a name="requirement_gitlab"></a> [gitlab](#requirement\_gitlab) | >= 3.19.0 |
| <a name="requirement_null"></a> [null](#requirement\_null) | >= 3.2 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_github"></a> [github](#provider\_github) | >= 5.15.0 |
| <a name="provider_gitlab"></a> [gitlab](#provider\_gitlab) | >= 3.19.0 |
| <a name="provider_null"></a> [null](#provider\_null) | >= 3.2 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [github_repository.this](https://registry.terraform.io/providers/integrations/github/latest/docs/resources/repository) | resource |
| [gitlab_project.this](https://registry.terraform.io/providers/gitlabhq/gitlab/latest/docs/resources/project) | resource |
| [gitlab_project_mirror.this](https://registry.terraform.io/providers/gitlabhq/gitlab/latest/docs/resources/project_mirror) | resource |
| [null_resource.trigger_mirror_push](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_archived"></a> [archived](#input\_archived) | Whether the project is archived | `bool` | `false` | no |
| <a name="input_avatar_path"></a> [avatar\_path](#input\_avatar\_path) | Filesystem path to the project avatar | `string` | `null` | no |
| <a name="input_description"></a> [description](#input\_description) | The project description. | `string` | n/a | yes |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | Set to false to prevent the module from creating any resources. | `bool` | `true` | no |
| <a name="input_github_mirror"></a> [github\_mirror](#input\_github\_mirror) | Create a mirror of this project on GitHub. | `bool` | `false` | no |
| <a name="input_github_token"></a> [github\_token](#input\_github\_token) | The GitHub access token to use for mirroring (required if github\_mirror is true). | `string` | `""` | no |
| <a name="input_github_user"></a> [github\_user](#input\_github\_user) | The GitHub username to use for mirroring (required if github\_mirror is true). | `string` | `""` | no |
| <a name="input_gitlab_group"></a> [gitlab\_group](#input\_gitlab\_group) | The ID of the GitLab group in which to create the project. If this is not specified, it will be created in the personal namespace of the authenticated user. | `number` | `null` | no |
| <a name="input_gitlab_token"></a> [gitlab\_token](#input\_gitlab\_token) | The GitLab access token to use to trigger an initial mirror push. No initial push will happen if null. | `string` | `null` | no |
| <a name="input_issues_template"></a> [issues\_template](#input\_issues\_template) | The template to use for new issues. | `string` | `null` | no |
| <a name="input_merge_requests_template"></a> [merge\_requests\_template](#input\_merge\_requests\_template) | The template to use for new merge requests. | `string` | `null` | no |
| <a name="input_name"></a> [name](#input\_name) | The project name. | `string` | n/a | yes |
| <a name="input_shared_runners"></a> [shared\_runners](#input\_shared\_runners) | Enable shared runners on the GitLab repository. | `bool` | `true` | no |
| <a name="input_visibility"></a> [visibility](#input\_visibility) | The visibility of the project. Allowed values are "public" and "private". This will apply also to the GitHub mirror if specified to be created. | `string` | `"public"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_github_repository_git_url"></a> [github\_repository\_git\_url](#output\_github\_repository\_git\_url) | The URL to clone from the GitHub mirror using the git protocol, if created. |
| <a name="output_github_repository_web_url"></a> [github\_repository\_web\_url](#output\_github\_repository\_web\_url) | The web URL for the GitHub mirror, if created. |
| <a name="output_gitlab_project_id"></a> [gitlab\_project\_id](#output\_gitlab\_project\_id) | The ID of the GitLab project. |
| <a name="output_gitlab_project_ssh_url"></a> [gitlab\_project\_ssh\_url](#output\_gitlab\_project\_ssh\_url) | The SSH URL to clone/push this GitLab project. |
| <a name="output_gitlab_project_web_url"></a> [gitlab\_project\_web\_url](#output\_gitlab\_project\_web\_url) | The web URL for the GitLab project. |
<!-- markdownlint-restore -->
<!-- markdownlint-disable -->
## Makefile Targets
```text
Available targets:

  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  lint                                Lint terraform code

```
<!-- markdownlint-restore -->





## References

For additional context, refer to some of these links.

- [GitLab Projects API](https://docs.gitlab.com/ee/api/projects.html) - The API documentation for GitLab projects.
- [GitHub Repositories](https://docs.github.com/en/rest/repos/repos) - The API documentation for GitHub repositories.


## Help

**Got a question?** We got answers.

File a GitLab [issue](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/issues), send us an [email][email] or join our [Matrix Community][matrix].

[![README Commercial Support][readme_commercial_support_img]][readme_commercial_support_link]

## Matrix Community

[![Matrix badge](https://img.shields.io/badge/Matrix-%23dev%3Asr2.uk-blueviolet)][matrix]

Join our [Open Source Community][matrix] on Matrix. It's **FREE** for everyone! This is the best place to talk shop, ask questions, solicit feedback, and work together as a community to build on our open source code.

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://gitlab.com/sr2c/terraform-gitlab-software-project/-/issues) to report any bugs or file feature requests.

### Developing

If you are interested in being a contributor and want to get involved in developing this project or help out with our other projects, we would love to hear from you! Shoot us an [email][email].

In general, PRs are welcome. We follow the typical "fork-and-pull" Git workflow.

 1. **Fork** the repo on GitLab
 2. **Clone** the project to your own machine
 3. **Commit** changes to your own branch
 4. **Push** your work back up to your fork
 5. Submit a **Pull Request** so that we can review your changes

**NOTE:** Be sure to merge the latest changes from "upstream" before making a pull request!


## Copyright

Copyright © 2021-2024 SR2 Communications Limited













## Trademarks

All other trademarks referenced herein are the property of their respective owners.

## About

This project is maintained by [SR2 Communications Limited][website].

[![SR2 Communications Limited][logo]][website]

We're a [DevOps services][website] company based in Aberdeen, Scotland. We ❤️ open source software and
specialise in digital human rights and humanitarian projects.

We offer [paid support][website] on all of our projects.

Check out [our other projects][gitlab], or [hire us][website] to get support with using our projects.

## Trans Rights

![Trans Rights Are Human Rights][trans_rights]

Trans is an umbrella term to describe people whose gender is not the same as, or does not sit comfortably with, the
sex they were assigned at birth. *Like all people*, they have the right to be treated with dignity and respect and to
have their human rights protected.

Trans people face significant discrimination and prejudice in many areas of their lives, including employment,
education, housing, and healthcare. They are also at increased risk of violence and hate crimes. These issues
can have a serious impact on the physical and mental well-being of trans people and can prevent them from fully
participating in society.

Trans rights are therefore an important part of the broader struggle for human rights. Everyone, regardless of
their gender identity, should be able to live their lives free from discrimination and to enjoy the same rights and
opportunities as everyone else. This includes the right to express their gender identity and to be treated with respect
and dignity.

It is important for society to recognize and respect the rights of trans people, and to take steps to address the
discrimination and prejudice that they face. This can include supporting policies and laws that protect trans
people from discrimination and promoting acceptance and understanding of trans people within the broader
community.

* [Four Pillars'](https://www.fourpillarsuk.org/) mission is to support the LGBT+ community in manners of Mental,
  Emotional, Physical & Sexual Health and offer information & support on a person-to-person basis to build a community
  that supports itself through peer education; thereby allowing individuals to make informed choices to improve their
  overall health & wellbeing.

* [Gendered Intelligence](https://genderedintelligence.co.uk/) is a trans-led and trans-involving grassroots organisation
  with a wealth of lived experience, community connections of many kinds, and a depth and breadth of trans community
  knowledge. They offer staff training, consultancy, youth work, mentoring and undertake public engagement activities.

If you have the means and you have benefited from this open source project, please consider making a donation to either
(or both) of the above groups.


## Contributors

<!-- markdownlint-disable -->
|  [![irl][irlxyz_avatar]][irlxyz_homepage]<br/>[irl][irlxyz_homepage] |
|---|
<!-- markdownlint-restore -->

  [irlxyz_homepage]: https://gitlab.com/irlxyz
  [irlxyz_avatar]: https://gitlab.com/uploads/-/system/user/avatar/5895869/avatar.png?width=130

<!-- markdownlint-disable -->
  [logo]: https://www.sr2.uk/readme/logo.png
  [website]: https://www.sr2.uk/?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=website
  [gitlab]: https://go.sr2.uk/gitlab?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=gitlab
  [contact]: https://go.sr2.uk/contact?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=contact
  [matrix]: https://go.sr2.uk/matrix?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=matrix
  [linkedin]: https://www.linkedin.com/company/sr2uk/
  [email]: mailto:contact@sr2.uk
  [readme_header_img]: https://www.sr2.uk/readme/paid-support.png
  [readme_header_link]: https://www.sr2.uk/?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=readme_header_link
  [readme_commercial_support_img]: https://www.sr2.uk/readme/paid-support.png
  [readme_commercial_support_link]: https://go.sr2.uk/commerical-support?utm_source=gitlab&utm_medium=readme&utm_campaign=sr2c/terraform-gitlab-software-project&utm_content=readme_commercial_support_link
  [trans_rights]: https://img.shields.io/badge/Trans%20Rights-Human%20Rights-lightblue?logo=data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADVJREFUeNpijD73i4EUwMRAIiBZA+PXlTsGm5P+//8/yJzE8m3VzkHmJNL9kKbqNMicBBBgAM3lCr5JiK9jAAAAAElFTkSuQmCC
<!-- markdownlint-restore -->
